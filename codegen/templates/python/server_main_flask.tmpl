{{- define "server_main_flask" -}}
# DO NOT EDIT THIS FILE. This file will be overwritten when re-running go-raml.

from flask import Flask, send_from_directory, send_file
{{ range $k, $v := .ResourcesDef -}}
from {{.Name | ToLower}}_api import {{.Name | ToLower}}_api
{{end }}
import os
dir_path = os.path.dirname(os.path.realpath(__file__))

app = Flask(__name__)

{{range $k, $v := .ResourcesDef -}}
app.register_blueprint({{.Name | ToLower }}_api)
{{end}}
{{if .ShowAPIDocsAndIndex}}
{{ if .APIDocsDir }}
@app.route('/{{.APIDocsDir}}/<path:path>')
def send_js(path):
    return send_from_directory(dir_path + '/' + '{{.APIDocsDir}}', path)
{{ end }}

@app.route('/', methods=['GET'])
def home():
    return send_file(dir_path + '/index.html')
{{end}}
if __name__ == "__main__":
    app.run(debug=True)

{{end -}}
