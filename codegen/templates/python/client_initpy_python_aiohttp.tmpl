{{- define "client_initpy_python_aiohttp" -}}
# DO NOT EDIT THIS FILE. This file will be overwritten when re-running go-raml.
{{ range $class := .Classes}}
from .{{$class}} import {{$class}}
{{- end}}
{{ range $k, $v := .Services }}
from .{{$v.FilenameNoExt}} import  {{$v.Name}} {{end}}
{{- range $k, $v := .Securities}}
from .{{$v.ModuleName}} import {{$v.ClassName}}{{end}}

from .http_client import HTTPClient


class Client:
    def __init__(self,loop, base_uri="{{.BaseURI}}"):
        http_client = HTTPClient(loop, base_uri)
        {{- if .Securities}}
        self.security_schemes = Security(http_client) {{end}}
        {{ range $k, $v := .Services }}
        self.{{$v.EndpointName}} = {{$v.Name}}(http_client){{end}}
        self.close = http_client.close

{{ if .Securities}}
class Security:
    def __init__(self, http_client):
        {{- range $k, $v := .Securities}}
        self.{{$v.ModuleName}} = {{$v.ClassName}}(http_client){{end}}
{{ end }}
{{- end -}}
